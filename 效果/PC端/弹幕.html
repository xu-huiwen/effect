<!DOCTYPE html>
<html>
	<head>
		<meta charset="GBK">
		<title>弹幕</title>
		<style type="text/css">
		/*弹幕*/
		.danmu-box{width:100%;height:310px;position:absolute;top:42px;left:0;z-index:99;}
		.danmustage{width:100%;height:100%;z-index:2;color:#fff;overflow:hidden;font-size:20px;z-index:1;}
		.danmu{height:24px;line-height:24px;display:block;}
		.pause{position:absolute;right:57px;top:47px;background:#000;color:#fff;width:40px;height:40px;line-height:36px;text-align:center;text-decoration:none;z-index:9999;font-size:30px;}
			.pause:hover{text-decoration: none;}
		</style>
	</head>
	<body>
	<!--弹幕-->
	<div class="danmu-box">
		<div class="danmustage"></div>
		<a href="javascript:;" class="pause btn">x</a>
	</div>	
	<script src="http://game.gtimg.cn/images/js/su/danMu.beta.min.js"></script> 
	<script src="http://ossweb-img.qq.com/images/js/jquery/jquery-1.9.1.min.js"></script> 
	<script type="text/javascript" src="http://ossweb-img.qq.com/images/cf/act/a20160608gun/dm.js" charset="utf-8"></script>
	<script>
	//初始的弹幕数据
 	var dm = new danMu({
   		stage: $(".danmustage"),
    	comments: InitDM,
    	danMuHtml: "<span>{comment}</span>",
    	colors: ["#fff","#00ccff","#ff0000","#00ff00","#fef500"],
    	flyTime:12000, 
    	timeInterval:1200,
    	randomSort:true,
		cookieName:'',
    	hSpacing:0.8
  	});

    //发送弹幕
  	var sendDanmuCheck = function(){
	    var commVal = $.trim( $("#comment").val().replace(/(<br[^>]*>|\s*)/g,'') );
	    if(commVal == ''){
	      $("#comment").blur();
	      alert('很抱歉，您的弹幕内容不能少于3个字');
	      return false;
	    }else if(commVal.length > 50){
	      $("#comment").blur();
	      alert('很抱歉，您的弹幕内容不能超过30个字');
	      return false;
	    }
	    $("#comment").blur();
	    dm.send(commVal,function(){
	      $("#comment").val('');
	    });
  	};
 	$(".pause").bind('click', function(e) {
	    $(this).hide();
	    $(".play,.danmu-box").hide();
	    dm.pause();
  	});
	</script>
	</body>
</html>
