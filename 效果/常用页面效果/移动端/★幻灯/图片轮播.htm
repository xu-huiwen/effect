<!DOCTYPE HTML>
<html lang="en-US">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
<head>
	<meta charset="gb2312">
	<title></title>
	<style type="text/css">
		*{margin:0;padding:0;}
		ul{list-style: none;}
		img{display: block;}
		.slider{width: 320px;height: 180px;overflow:hidden;margin: 0 auto;background: #fff;}
		#slider{width: 96999px;height: 150px;-webkit-backface-visibility: hidden;}
        #slider li{float: left;}
        #slider li img{width: 320px;height: 150px;}
        #index_point{width:85px;margin: 10px auto;}
        #index_point li{width: 10px;height: 10px;border-radius: 5px;text-indent: -9999px;float: left;margin-left: 10px;
            background: #F3F3F3;
            background: -moz-linear-gradient(top, #009CFF 0%, #A4A4A4 100%);
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F3F3F3), color-stop(100%,#A4A4A4));
            background: -webkit-linear-gradient(top, #F3F3F3 0%,#A4A4A4 100%);
            background: -o-linear-gradient(top, #F3F3F3 0%,#A4A4A4 100%);
            background: -ms-linear-gradient(top, #F3F3F3 0%,#A4A4A4 100%);
            background: linear-gradient(to bottom, #F3F3F3 0%,#A4A4A4 100%);
        }
        #index_point  .now{
            background: #009CFF;
            background: -moz-linear-gradient(top, #009CFF 0%, #0075BF 100%);
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#009CFF3), color-stop(100%, #0075BF));
            background: -webkit-linear-gradient(top, #009CFF 0%,#0075BF 100%);
            background: -o-linear-gradient(top, #009CFF 0%,#0075BF 100%);
            background: -ms-linear-gradient(top, #009CFF 0%,#0075BF 100%);
            background: linear-gradient(to bottom, #009CFF 0%,#0075BF 100%);
        }

    </style>
</head>
<body>
    <div class="top" style="height:200px;"></div>
	<div class="slider">
		<ul id="slider">
			<li><img src="http://placehold.it/350x150" alt=""></li>
			<li><img src="http://placehold.it/350x150" alt=""></li>
			<li><img src="http://placehold.it/350x150" alt=""></li>
			<li><img src="http://placehold.it/350x150" alt=""></li>
		</ul>
        <ul id="index_point">
            <li class="now">1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>

    </div>
	<script type="text/javascript">
    (function() {
      var current = window.getComputedStyle || window.currentStyle;

      window.wSlider = function(o) {
        var self = this;
        this.el = document.getElementById(o);
        var distX = 0,
            distY = 0,
            startPosX = 0,
            startPosY = 0,
            endPosX = 0,
            endPosY = 0,
            move = 0,
            index = 0,
            len = this.el.getElementsByTagName("img").length;

        this.setVendorProperty = function(prop, val) {
          self.el.style.setProperty('-webkit-' + prop, val);
          self.el.style.setProperty('-moz-' + prop, val);
          self.el.style.setProperty('-ms-' + prop, val);
          self.el.style.setProperty('-o-' + prop, val);
        };
        this.start = function(event) {
          if (!event.touches.length) return;
          var touch = event.touches[0];
          startPosX = touch.pageX;
          startPosY = touch.pageY;
          event.stopPropagation();

        };
        this.move = function(event) {
          if (!event.touches.length && !current) return;
          var touch = event.touches[0];
          endPosX = touch.pageX;
          endPosY = touch.pageY;
          distX = endPosX - startPosX;
          distY = endPosY - startPosY;
          if (Math.abs(distX) > Math.abs(distY)) {
            event.preventDefault();
            event.stopPropagation();
          }


        };
        this.end = function() {
          if (Math.abs(distX) > self.el.parentNode.offsetWidth / 5) {
            move = -self.el.parentNode.offsetWidth;
            if (distX < 0 && index < len - 1) {
              index++;
            } else if (index > 0 && distX > 0 && index < len) {
              index--;
            };
          };

          this.setVendorProperty("transform", "translateX(" + move * index + "px)");
          this.setVendorProperty("transition", "all ease 0.5s");
          var pointer = document.getElementById("index_point").getElementsByTagName("li");
          for (var i = 0; i < pointer.length; i++) {
            pointer[i].className = "";
          }
          pointer[index].className = "now";
          distX = 0;
          event.stopPropagation();
        };
        this.action = function() {
          self.el.addEventListener("touchstart", function(event) {
            self.start(event);
          });
          self.el.addEventListener("touchmove", function(event) {
            self.move(event);
          });
          self.el.addEventListener("touchend", function(event) {
            self.end(event);
          });
        };
      };
    })(this)
     var s = new wSlider("slider");
    s.action();
	</script>
</body>
</html>