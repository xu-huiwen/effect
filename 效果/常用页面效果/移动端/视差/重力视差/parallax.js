;(function(m,n,o){'use strict';var p='Parallax';var q=30;var r={relativeInput:false,clipRelativeInput:false,calibrationThreshold:100,calibrationDelay:500,supportDelay:500,calibrateX:false,calibrateY:true,invertX:true,invertY:true,limitX:false,limitY:false,scalarX:10.0,scalarY:10.0,frictionX:0.1,frictionY:0.1,originX:0.5,originY:0.5};function Parallax(a,b){this.element=a;this.layers=a.getElementsByClassName('layer');var c={calibrateX:this.data(this.element,'calibrate-x'),calibrateY:this.data(this.element,'calibrate-y'),invertX:this.data(this.element,'invert-x'),invertY:this.data(this.element,'invert-y'),limitX:this.data(this.element,'limit-x'),limitY:this.data(this.element,'limit-y'),scalarX:this.data(this.element,'scalar-x'),scalarY:this.data(this.element,'scalar-y'),frictionX:this.data(this.element,'friction-x'),frictionY:this.data(this.element,'friction-y'),originX:this.data(this.element,'origin-x'),originY:this.data(this.element,'origin-y')};for(var d in c){if(c[d]===null)delete c[d]}this.extend(this,r,b,c);this.calibrationTimer=null;this.calibrationFlag=true;this.enabled=false;this.depths=[];this.raf=null;this.bounds=null;this.ex=0;this.ey=0;this.ew=0;this.eh=0;this.ecx=0;this.ecy=0;this.erx=0;this.ery=0;this.cx=0;this.cy=0;this.ix=0;this.iy=0;this.mx=0;this.my=0;this.vx=0;this.vy=0;this.onMouseMove=this.onMouseMove.bind(this);this.onDeviceOrientation=this.onDeviceOrientation.bind(this);this.onOrientationTimer=this.onOrientationTimer.bind(this);this.onCalibrationTimer=this.onCalibrationTimer.bind(this);this.onAnimationFrame=this.onAnimationFrame.bind(this);this.onWindowResize=this.onWindowResize.bind(this);this.initialise()}Parallax.prototype.extend=function(){if(arguments.length>1){var a=arguments[0];for(var i=1,l=arguments.length;i<l;i++){var b=arguments[i];for(var c in b){a[c]=b[c]}}}};Parallax.prototype.data=function(a,b){return this.deserialize(a.getAttribute('data-'+b))};Parallax.prototype.deserialize=function(a){if(a==="true"){return true}else if(a==="false"){return false}else if(a==="null"){return null}else if(!isNaN(parseFloat(a))&&isFinite(a)){return parseFloat(a)}else{return a}};Parallax.prototype.camelCase=function(c){return c.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():''})};Parallax.prototype.transformSupport=function(a){var b=n.createElement('div');var c=false;var d=null;var e=false;var f=null;var g=null;for(var i=0,l=this.vendors.length;i<l;i++){if(this.vendors[i]!==null){f=this.vendors[i][0]+'transform';g=this.vendors[i][1]+'Transform'}else{f='transform';g='transform'}if(b.style[g]!==o){c=true;break}}switch(a){case'2D':e=c;break;case'3D':if(c){var h=n.body||n.createElement('body');var j=n.documentElement;var k=j.style.overflow;if(!n.body){j.style.overflow='hidden';j.appendChild(h);h.style.overflow='hidden';h.style.background=''}h.appendChild(b);b.style[g]='translate3d(1px,1px,1px)';d=m.getComputedStyle(b).getPropertyValue(f);e=d!==o&&d.length>0&&d!=="none";j.style.overflow=k;h.removeChild(b)}break}return e};Parallax.prototype.ww=null;Parallax.prototype.wh=null;Parallax.prototype.wcx=null;Parallax.prototype.wcy=null;Parallax.prototype.wrx=null;Parallax.prototype.wry=null;Parallax.prototype.portrait=null;Parallax.prototype.desktop=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);Parallax.prototype.vendors=[null,['-webkit-','webkit'],['-moz-','Moz'],['-o-','O'],['-ms-','ms']];Parallax.prototype.motionSupport=!!m.DeviceMotionEvent;Parallax.prototype.orientationSupport=!!m.DeviceOrientationEvent;Parallax.prototype.orientationStatus=0;Parallax.prototype.transform2DSupport=Parallax.prototype.transformSupport('2D');Parallax.prototype.transform3DSupport=Parallax.prototype.transformSupport('3D');Parallax.prototype.propertyCache={};Parallax.prototype.initialise=function(){if(this.transform3DSupport)this.accelerate(this.element);var a=m.getComputedStyle(this.element);if(a.getPropertyValue('position')==='static'){this.element.style.position='relative'}this.updateLayers();this.updateDimensions();this.enable();this.queueCalibration(this.calibrationDelay)};Parallax.prototype.updateLayers=function(){this.layers=this.element.getElementsByClassName('layer');this.depths=[];for(var i=0,l=this.layers.length;i<l;i++){var a=this.layers[i];if(this.transform3DSupport)this.accelerate(a);a.style.position=i?'absolute':'relative';a.style.display='block';a.style.left=0;a.style.top=0;this.depths.push(this.data(a,'depth')||0)}};Parallax.prototype.updateDimensions=function(){this.ww=m.innerWidth;this.wh=m.innerHeight;this.wcx=this.ww*this.originX;this.wcy=this.wh*this.originY;this.wrx=Math.max(this.wcx,this.ww-this.wcx);this.wry=Math.max(this.wcy,this.wh-this.wcy)};Parallax.prototype.updateBounds=function(){this.bounds=this.element.getBoundingClientRect();this.ex=this.bounds.left;this.ey=this.bounds.top;this.ew=this.bounds.width;this.eh=this.bounds.height;this.ecx=this.ew*this.originX;this.ecy=this.eh*this.originY;this.erx=Math.max(this.ecx,this.ew-this.ecx);this.ery=Math.max(this.ecy,this.eh-this.ecy)};Parallax.prototype.queueCalibration=function(a){clearTimeout(this.calibrationTimer);this.calibrationTimer=setTimeout(this.onCalibrationTimer,a)};Parallax.prototype.enable=function(){if(!this.enabled){this.enabled=true;if(this.orientationSupport){this.portrait=null;m.addEventListener('deviceorientation',this.onDeviceOrientation);setTimeout(this.onOrientationTimer,this.supportDelay)}else{this.cx=0;this.cy=0;this.portrait=false;m.addEventListener('mousemove',this.onMouseMove)}m.addEventListener('resize',this.onWindowResize);this.raf=requestAnimationFrame(this.onAnimationFrame)}};Parallax.prototype.disable=function(){if(this.enabled){this.enabled=false;if(this.orientationSupport){m.removeEventListener('deviceorientation',this.onDeviceOrientation)}else{m.removeEventListener('mousemove',this.onMouseMove)}m.removeEventListener('resize',this.onWindowResize);cancelAnimationFrame(this.raf)}};Parallax.prototype.calibrate=function(x,y){this.calibrateX=x===o?this.calibrateX:x;this.calibrateY=y===o?this.calibrateY:y};Parallax.prototype.invert=function(x,y){this.invertX=x===o?this.invertX:x;this.invertY=y===o?this.invertY:y};Parallax.prototype.friction=function(x,y){this.frictionX=x===o?this.frictionX:x;this.frictionY=y===o?this.frictionY:y};Parallax.prototype.scalar=function(x,y){this.scalarX=x===o?this.scalarX:x;this.scalarY=y===o?this.scalarY:y};Parallax.prototype.limit=function(x,y){this.limitX=x===o?this.limitX:x;this.limitY=y===o?this.limitY:y};Parallax.prototype.origin=function(x,y){this.originX=x===o?this.originX:x;this.originY=y===o?this.originY:y};Parallax.prototype.clamp=function(a,b,c){a=Math.max(a,b);a=Math.min(a,c);return a};Parallax.prototype.css=function(a,b,c){var d=this.propertyCache[b];if(!d){for(var i=0,l=this.vendors.length;i<l;i++){if(this.vendors[i]!==null){d=this.camelCase(this.vendors[i][1]+'-'+b)}else{d=b}if(a.style[d]!==o){this.propertyCache[b]=d;break}}}a.style[d]=c};Parallax.prototype.accelerate=function(a){this.css(a,'transform','translate3d(0,0,0)');this.css(a,'transform-style','preserve-3d');this.css(a,'backface-visibility','hidden')};Parallax.prototype.setPosition=function(a,x,y){x+='px';y+='px';if(this.transform3DSupport){this.css(a,'transform','translate3d('+x+','+y+',0)')}else if(this.transform2DSupport){this.css(a,'transform','translate('+x+','+y+')')}else{a.style.left=x;a.style.top=y}};Parallax.prototype.onOrientationTimer=function(a){if(this.orientationSupport&&this.orientationStatus===0){this.disable();this.orientationSupport=false;this.enable()}};Parallax.prototype.onCalibrationTimer=function(a){this.calibrationFlag=true};Parallax.prototype.onWindowResize=function(a){this.updateDimensions()};Parallax.prototype.onAnimationFrame=function(){this.updateBounds();var a=this.ix-this.cx;var b=this.iy-this.cy;if((Math.abs(a)>this.calibrationThreshold)||(Math.abs(b)>this.calibrationThreshold)){this.queueCalibration(0)}if(this.portrait){this.mx=this.calibrateX?b:this.iy;this.my=this.calibrateY?a:this.ix}else{this.mx=this.calibrateX?a:this.ix;this.my=this.calibrateY?b:this.iy}this.mx*=this.ew*(this.scalarX/100);this.my*=this.eh*(this.scalarY/100);if(!isNaN(parseFloat(this.limitX))){this.mx=this.clamp(this.mx,-this.limitX,this.limitX)}if(!isNaN(parseFloat(this.limitY))){this.my=this.clamp(this.my,-this.limitY,this.limitY)}this.vx+=(this.mx-this.vx)*this.frictionX;this.vy+=(this.my-this.vy)*this.frictionY;for(var i=0,l=this.layers.length;i<l;i++){var c=this.layers[i];var d=this.depths[i];var e=this.vx*d*(this.invertX?-1:1);var f=this.vy*d*(this.invertY?-1:1);this.setPosition(c,e,f)}this.raf=requestAnimationFrame(this.onAnimationFrame)};Parallax.prototype.onDeviceOrientation=function(a){if(!this.desktop&&a.beta!==null&&a.gamma!==null){this.orientationStatus=1;var x=(a.beta||0)/q;var y=(a.gamma||0)/q;var b=this.wh>this.ww;if(this.portrait!==b){this.portrait=b;this.calibrationFlag=true}if(this.calibrationFlag){this.calibrationFlag=false;this.cx=x;this.cy=y}this.ix=x;this.iy=y}};Parallax.prototype.onMouseMove=function(a){var b=a.clientX;var c=a.clientY;if(!this.orientationSupport&&this.relativeInput){if(this.clipRelativeInput){b=Math.max(b,this.ex);b=Math.min(b,this.ex+this.ew);c=Math.max(c,this.ey);c=Math.min(c,this.ey+this.eh)}this.ix=(b-this.ex-this.ecx)/this.erx;this.iy=(c-this.ey-this.ecy)/this.ery}else{this.ix=(b-this.wcx)/this.wrx;this.iy=(c-this.wcy)/this.wry}};m[p]=Parallax})(window,document);(function(){var f=0;var g=['ms','moz','webkit','o'];for(var x=0;x<g.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[g[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[g[x]+'CancelAnimationFrame']||window[g[x]+'CancelRequestAnimationFrame']}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(a,b){var c=new Date().getTime();var d=Math.max(0,16-(c-f));var e=window.setTimeout(function(){a(c+d)},d);f=c+d;return e}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(a){clearTimeout(a)}}}());