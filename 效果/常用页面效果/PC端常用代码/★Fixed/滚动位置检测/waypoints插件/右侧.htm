<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>¹ö¶¯¹Ì¶¨Ìø×ª</title>
<style type="text/css">
* {margin:0;padding:0;border:0;}
* html { background-image:url(about:blank); background-attachment:fixed;}
.ct {border:1px solid red;height:1000px;margin:50px;}
.list {position:fixed;top:50px;right:40px;_position:absolute;_bottom:auto;_top:expression(eval(document.documentElement.scrollTop));list-style:none;_margin-top: 50px;}
.list li {background-color:#00f;height:20px;width:100px;cursor:pointer;color:#fff;margin-bottom:10px;text-align:center;}
.list .on {color:red;background-color:#ff0;}
.active {background-color:#333;}
</style>
</head>

<body>
        <ul class="list">
            <li>div1</li>
            <li>div2</li>
            <li>div3</li>
        </ul>
        <div class="ct">
            div 1
        </div>
        <div class="ct">
            div 2
        </div>
        <div class="ct">
            div 3
        </div>

        <script src="http://ossweb-img.qq.com/images/js/jquery/jquery-1.4.4.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="waypoints.min.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript" charset="utf-8">
            jQuery(function($) {
                var waypointSelector = '.ct';
                var linkSelector = '.list li';
                var linkActiveClass = 'on';

                // Register each section as a waypoint.
                $(waypointSelector).waypoint();

                // The same for all waypoints
                $('body').delegate(waypointSelector, 'waypoint.reached', function(event, direction) {
                    var $active = $(this);
                    var pos = $(waypointSelector).index($active);

                    if (direction === "up" && pos != 0) {
                        $active = $active.prev();
                    }
                    if (!$active.length) $active.end();
                    var pos = $(waypointSelector).index($active);



                    $(linkSelector+'.'+linkActiveClass).removeClass(linkActiveClass);
                    $(linkSelector).eq(pos).addClass(linkActiveClass);

                });

                // Wicked credit to
                // http://www.zachstronaut.com/posts/2009/01/18/jquery-smooth-scroll-bugs.html
                var scrollElement = 'html, body';
                $('html, body').each(function () {
                    var initScrollTop = $(this).attr('scrollTop');
                    $(this).attr('scrollTop', initScrollTop + 1);
                    if ($(this).attr('scrollTop') == initScrollTop + 1) {
                        scrollElement = this.nodeName.toLowerCase();
                        $(this).attr('scrollTop', initScrollTop);
                        return false;
                    }
                });

                // Smooth scrolling for internal links
                $(linkSelector).click(function(event) {
                    event.preventDefault();

                    var activeWaypoint = $(waypointSelector).eq($(linkSelector).index($(this)))
                    $('html, body').stop().animate({
                        'scrollTop': activeWaypoint.offset().top
                    }, 500, 'swing', function() {

                    });

                });

            });
        </script>
    </body>
</html>
