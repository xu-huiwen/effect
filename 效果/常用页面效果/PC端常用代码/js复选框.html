<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>js复选框</title>
	<style>
		.main {width:1000px;margin:0 auto;}
		.btn {width: 50px;height: 50px;border: 1px solid #f00;margin-top:10px;}
		.on {background-color: #f00;}
	</style>
</head>
<body>
	<div class="main">
		<div class="btn"></div>
		<div class="btn"></div>
		<div class="btn"></div>
	</div>

<script>
	function gE(e) {
	    return (typeof (e) == "object") ? e : document.getElementById(e)
	}
	function gTag(o,t) {
		return o.getElementsByTagName(t)
	}
	function hasClass(o,c) {
		var regexp = new RegExp("(^|\\s)" + c + "(\\s|$)", "g");
		return regexp.test(o.className)
	}
	function gClass(o, c) {
	  var e = [],
	      t = gTag(o, "*");
	  for (var i = 0; i < t.length; i++) {
	    if (hasClass(t[i], c)) {
	      e[e.length] = t[i]
	    }
	  }
	  return e
	}
	var btns = gClass(document,'btn');
	 for (var i = 0; i < btns.length; i++) {
		btns[i].n = i;
		btns[i].onclick = function() {
			if (hasClass(this, 'on')) {
				btns[this.n].className = btns[this.n].className.replace(RegExp("(^|\\s)" + 'on' + "(\\s|$)", "g"), "");
			}
			else {
				btns[this.n].className += (btns[this.n].className ? " " : "") + 'on';
			}
		}
	}
</script>
</body>
</html>