<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>local music</title>
<style>
* {margin: 0;padding: 0;border: 0;}
ul {list-style-type: none;}
.c:before,.c:after {content:"";display:table;}
.c:after {clear:both;}
.c {zoom:1;}
.fl {float: left;}
.fr {float: right;}
.wrap-audio {width: 500px;margin: 0 auto;background-color: #ccc;}
.people0,.people1,.people2,.people3{width: 100px;height: 100px;}
.people0 {background-color: #f00;}
.people1 {background-color: #0f0;}
.people2 {background-color: #00f;}
.people3 {background-color: #0ff;}
.list-audio li {background-color: #333;width: 300px;margin-bottom: 1px;color: #fff;text-align: center;cursor: pointer;}
.list-audio .on {background-color: #ccc;color: #000;}
.down {color: #f00;}
.btn-play{color: #fff;}
.btn-pause {color: #0f0;}
.player {position: absolute;left: -999em;top: 0;}
</style>
</head>
<body>
<div class="wrap-audio c">
	<div class="people0 fl" id="people"></div>
	<ul class="list-audio fr">
		<li id="audio0"  onclick="aplay(this,0)">声音1 <a href="javascript:" class="down" id="down0" target="_balnk">下载</a><a href="javascript:" class="btn-play" id="aBtn0">播放/暂停</a></li>
		<li id="audio1"  onclick="aplay(this,1)">声音2 <a href="javascript:" class="down" id="down1" target="_balnk">下载</a><a href="javascript:" class="btn-play" id="aBtn1">播放/暂停</a></li>
		<li id="audio2"  onclick="aplay(this,2)">声音3 <a href="javascript:" class="down" id="down2" target="_balnk">下载</a><a href="javascript:" class="btn-play" id="aBtn2">播放/暂停</a></li>
		<li id="audio3"  onclick="aplay(this,3)">声音4 <a href="javascript:" class="down" id="down3" target="_balnk">下载</a><a href="javascript:" class="btn-play" id="aBtn3">播放/暂停</a></li>
	</ul>
</div>
<div id="player" class="player">
	<p>请安装flash播放器</p>
	<p>
		<a href="http://www.adobe.com/go/getflashplayer">
			<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
		</a>
	</p>
</div>
<script src="tgswfobj_s.js"></script>
<script>
function gE(id){
	return typeof(id) == "string" ? document.getElementById(id) : id;
}

function addEvent(target, eventType, handler){
	if (target.addEventListener){
		addEvent = function(target, eventType, handler){
			target.addEventListener(eventType, handler, false);
		};
	} else {
		addEvent = function(target, eventType, handler){
			target.attachEvent("on" + eventType, handler);
		};
	}
	addEvent(target, eventType, handler);
}

var aData = ["1.mp3", "2.mp3", "3.mp3", "4.mp3"],
	rUrl = "http://ossweb-img.qq.com/images/wuxia/web201308/audio/";
for (var i = 0, len = aData.length; i < len; i++) {
	gE("down" + i).href = rUrl + aData[i];
}

var curAudio = 0,
	curState = 0;

function pauseMusic() {
	getSwfObj("player").pauseAudio()
}

function changeMusic(v) {
	getSwfObj("player").changeAudio(rUrl + v, true)
}

function addAudio(aurl) {
	insertSwfV2("player", "audiotg.swf?v=" + Math.random(), "100", '10', {
		autoplay: "false",
		audio: aurl
	}, {}, "10.0");
}

function aplay(node, id) {
	gE("audio" + curAudio).className = "";
	node.className = "on";
	if (id === curAudio) {
		if (curState === 1) {
			curState = 0;
			gE("aBtn" + id).className = "btn-play";
			gE("audio" + id).className = "";
		} else {
			curState = 1;
			gE("aBtn" + id).className = "btn-pause";
		}
		pauseMusic();
	} else {
		curState = 1;
		gE("aBtn" + curAudio).className = "btn-play";
		gE("aBtn" + id).className = "btn-pause";
		changeMusic(aData[id]);
		gE("people").className = "people"+id+" fl"
		curAudio = id;
	}
}

addEvent(window, "load", function() {
	addAudio(rUrl + aData[0]);
})
</script>
</body>
</html>